{% extends "layout.html" %}
{% block page_title %}{{ data['training-provider-name'] }}{% endblock %}

{% block content %}

<main id="content" role="main">
  {% include "includes/phase_banner_beta.html" %}
  <div class="breadcrumbs">
    <ol>
      {% if value('multi-organisation') %}<li><a href="/">Organisations</a></li>{% endif %}
    </ol>
  </div>

  <h1 class="heading-xlarge">{{ data['training-provider-name'] }}</h1>

  <h2 class="heading-large">About your organisation</h2>
  <div class="grid-row">
    <div class="column-two-thirds">
      <dl class="course-part-tasks remove-top-margin">
        {{ macros.coursePart('about-your-organisation', 'About your organisation') }}
        {% if not data['self_accrediting'] %}
          {% for a in data['accreditors'] %}
            {{ macros.coursePart(a.slug + '-about-accrediting-provider', 'About ' + a.name + ' (optional)') }}
          {% endfor %}
        {% endif %}
        {{ macros.coursePart('training-with-a-disability', 'Training with disabilities and other needs') }}
      </dl>

      <p class="add-top-margin">
        <a href="/about-your-organisation">Edit and publish organisation information</a>
      </p>
    </div>
  </div>
  <hr />

  <h2 class="heading-large">
    Courses
  </h2>

  {% for accrediting in data['accreditors'] %}
    {% if data['accreditors'][0]['name'] != data['training-provider-name'] %}
      <h3 class="heading-medium">
        <span style="color: #777; font-weight: normal">Accrediting provider</span><br />
        {{ accrediting.name }}
      </h3>
    {% endif %}
    <div class="body-text">
      <table class="ucas-info-table table-small">
        <thead>
          <tr>
            <th class="subject-col" style="width: 30%">Course</th>
            <th class="type-col">Type</th>
            <th class="status-col">Status</th>
            <th class="complete-col">Course content</th>
          </tr>
        </thead>
        <tbody>
          {% set subjectName = '' %}
          {% for course in data['ucasCourses'] %}
            {% if course.accrediting == accrediting.name %}
              <tr>
                <td>
                  {% if (loop.index != 2 and loop.index != 4 and loop.index != 7) %}
                    <a href="/course/{{ accrediting.slug }}/{{ course.programmeCode }}">{{ course.name }} ({{ course.programmeCode }})</a>
                  {% else %}
                    <a href="/course-not-running/{{ accrediting.slug }}/{{ course.programmeCode }}">{{ course.name }} ({{ course.programmeCode }})</a>
                  {% endif %}
                </td>
                <td>{{ course.options }}</td>
                <td>{% if loop.index == 2 %}
                      New â€“ not yet running
                    {% elseif loop.index == 7 %}
                      Not running
                    {% elseif loop.index == 4 %}
                      Not running
                    {% else %}
                      Running
                    {% endif %}</td>
                <td>
                  {% if (loop.index != 2 and loop.index != 4 and loop.index != 7) %}
                    {% if data[course.programmeCode + '-publish-state'] == 'draft' %}
                      <span class="phase-tag phase-tag-small phase-tag-draft">Draft</span>
                    {% elseif data[course.programmeCode + '-publish-state'] == 'published' %}
                      <span class="phase-tag phase-tag-small phase-tag-published">Published</span>
                    {% else %}
                      <span class="phase-tag phase-tag-small phase-tag-no-content">Empty</span>
                    {% endif %}
                  {% endif %}
                </td>
              </tr>
              {% set subjectName = course.name %}
            {% endif %}
          {% endfor %}
        </tbody>
      </table>
    </div>
  {% endfor %}
  <hr />

  <h2 class="heading-large">Request access for someone</h2>
  <p>You can request a DfE Sign-in account for others who manage your courses.</p>
  <p>
    <a href="/request-access">Request access for someone</a>
  </p>
</main>

{% endblock %}
