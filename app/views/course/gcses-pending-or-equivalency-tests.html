{% extends "layout.html" %}
{% set title = "GCSEs and equivalency tests" %}
{% set backLink = course.path %}

{% block content %}
  <form action="{{ course.path }}" method="post" class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
      {% include "course/_errors.html" %}

      <h1 class="govuk-heading-xl">
        <span class="govuk-caption-xl">{{ course.name | safe }} ({{ course.programmeCode }})</span>
        {{ title }}
      </h1>

      <p class="govuk-body">Select how flexible you are towards candidates in meeting GCSE standards.</p>

      {% set mathsRadioName = course.programmeCode + "-gcse-maths-flexibility" %}
      {{ govukRadios({
        name: mathsRadioName,
        fieldset: {
          legend: {
            text: "Maths GCSE",
            classes: "govuk-fieldset__legend--m"
          }
        },
        items: [{
          value: "must",
          text: "Must have the GCSE, or equivalent (least flexible)",
          hint: {
            text: "Candidates who do not already have a GCSE grace C (4) or above, or above will be discouraged from applying, but not blocked."
          },
          checked: (data[mathsRadioName] === "must")
        }, {
          value: "pending",
          text: "Taking the GCSE",
          hint: {
            text: "You will consider applicants with a pending GCSE."
          },
          checked: (data[mathsRadioName] === "pending")
        }, {
          value: "equivalency-test-offered",
          text: "Equivalency test (most flexible)",
          hint: {
            text: "You will consider applicants who need to take an equivalency test, as well as those with a pending GCSE."
          },
          checked: (data[mathsRadioName] === "equivalency-test-offered")
        }]
      }) }}

      {% set englishRadioName = course.programmeCode + '-gcse-english-flexibility' %}
      {{ govukRadios({
        name: englishRadioName,
        fieldset: {
          legend: {
            text: "English GCSE",
            classes: "govuk-fieldset__legend--m"
          }
        },
        items: [{
          value: "must",
          text: "Must have the GCSE, or equivalent (least flexible)",
          hint: {
            text: "Candidates who do not already have a GCSE grace C (4) or above, or above will be discouraged from applying, but not blocked."
          },
          checked: (data[englishRadioName] === "must")
        }, {
          value: "pending",
          text: "Taking the GCSE",
          hint: {
            text: "You will consider applicants with a pending GCSE."
          },
          checked: (data[englishRadioName] === "pending")
        }, {
          value: "equivalency-test-offered",
          text: "Equivalency test (most flexible)",
          hint: {
            text: "You will consider applicants who need to take an equivalency test, as well as those with a pending GCSE."
          },
          checked: (data[englishRadioName] === "equivalency-test-offered")
        }]
      }) }}

      {% if course.name === "Primary" %}
        {% set scienceRadioName = course.programmeCode + "-gcse-science-flexibility" %}
        {{ govukRadios({
          name: scienceRadioName,
          fieldset: {
            legend: {
              text: "Science GCSE",
              classes: "govuk-fieldset__legend--m"
            }
          },
          items: [{
            value: "must",
            text: "Must have the GCSE, or equivalent (least flexible)",
            hint: {
              text: "Candidates who do not already have a GCSE grace C (4) or above, or above will be discouraged from applying, but not blocked."
            },
            checked: (data[scienceRadioName] === "must")
          }, {
            value: "pending",
            text: "Taking the GCSE",
            hint: {
              text: "You will consider applicants with a pending GCSE."
            },
            checked: (data[scienceRadioName] === "pending")
          }, {
            value: "equivalency-test-offered",
            text: "Equivalency test (most flexible)",
            hint: {
              text: "You will consider applicants who need to take an equivalency test, as well as those with a pending GCSE."
            },
            checked: (data[scienceRadioName] === "equivalency-test-offered")
          }]
        }) }}
      {% endif %}

      {{ govukButton({
        text: "Save"
      }) }}
    </div>
  </form>
{% endblock %}
