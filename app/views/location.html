{% extends "layout.html" %}
{% set title = school.name or 'Add a location' %}
{% block pageTitle %}{{ title }}{% endblock %}

{% block breadcrumbs %}
  {{
    govukBreadcrumbs({
      items: [
        {
          href: "/",
          text: data['training-provider-name']
        },
        {
          href: "/locations",
          text: "Locations"
        }
      ]
    })
  }}
{% endblock %}

{% block content %}
  {% if showErrors %}
    {% set errors = [
      {
        id: code + '-location-confirm',
        href: '#checkbox-part-1',
        text: 'Please confirm that candidates can pick this location when they apply'
      }
    ] %}

    {{ govukErrorSummary({
      titleText: "We couldnâ€™t save this location",
      errorList: errors
    }) }}
  {% endif %}

  <h1 class="govuk-heading-xl">
    {{ title }}
  </h1>

  <form action="/location/{{ code }}" method="post" class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
      {{ macros.textbox(code + '-name', '<h2 class="govuk-heading-m">Name</h2>', null, 'govuk-!-width-full', null, errors) }}

      <h2 class="govuk-heading-m govuk-!-margin-top-8">Address</h2>
      {{ macros.textbox(code + '-address', 'Building and street', null, 'govuk-!-width-full', null, errors) }}
      {{ macros.textbox(code + '-town', 'Town or city', null, 'form-control', null, errors) }}
      {{ macros.textbox(code + '-county', 'County', null, 'form-control', null, errors) }}
      {{ macros.textbox(code + '-postcode', 'Postcode', null, 'form-control-small', null, errors) }}

      {{ macros.select(code + '-ucas-region', 'Region of UK', [
        { name: 'London' },
        { name: 'South East' },
        { name: 'South West' },
        { name: 'Wales' },
        { name: 'West Midlands' },
        { name: 'East Midlands' },
        { name: 'Eastern' },
        { name: 'North West' },
        { name: 'Yorkshire and the Humber' },
        { name: 'North East' },
        { name: 'Scotland' },
        { name: 'Northern Ireland' },
        { name: 'No region' }
      ])}}

      {% if isNew %}
        <hr class="govuk-section-break govuk-section-break--visible govuk-section-break--l" />

        {% set fields = [
            {
              name: 'I confirm that candidates can choose this as a place of training when they complete their UCAS application form'
            }
          ]
        %}

        {{ macros.checkboxGroup(code + '-location-confirm', fields, errors) }}

        <input type="submit" class="govuk-button" value="Save" />
      {% else %}
        <input type="submit" class="govuk-button" value="Save and publish changes" />
        <p>
          <a href="/locations">Cancel changes</a>
        </p>
      {% endif %}
    </div>
  </form>
{% endblock %}
